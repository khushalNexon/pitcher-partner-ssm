import{j as e,B as w,P as c,a as F,o as q,r as E,S as j,I as h,T as B,b as A,W as k}from"./index-189ad134.js";import{F as v,C as t,T as m,u as D,a as L}from"./index.esm-fa80a447.js";import{u as O}from"./useEmployees-51d5d33e.js";import{T as P,e as $}from"./modal-d92f9407.js";import{D as M}from"./DataGrid-d3a715dd.js";import{B as y}from"./Button-bbb0ac73.js";import{C as G}from"./Container-b09bd05a.js";const b=({methods:l,isOpen:p,handleToggle:s,onSubmit:a,loading:d})=>(console.log(l,p,s,a,"methods, isOpen, handleToggle, onSubmit"),d?e.jsx("h2",{children:"Loading..."}):e.jsxs(P,{isOpen:p,handleToggle:s,children:[e.jsx("h3",{id:"transition-modal-title",className:"modal-title",children:"Create New Employee"}),e.jsx(v,{...l,children:e.jsxs(w,{component:"form",onSubmit:l.handleSubmit(a),sx:{display:"flex",flexDirection:"column",gap:2,width:"100%",margin:"auto"},children:[e.jsx(t,{name:"EmployeeABNNo",control:l.control,rules:{required:"EmployeeABNNo is required"},render:({field:o,fieldState:r})=>e.jsx(m,{...o,label:"EmployeeABNNo",variant:"outlined",error:!!r.error,helperText:r.error?r.error.message:""})}),e.jsx(t,{name:"EmployeeTFNNo",control:l.control,rules:{required:"EmployeeTFNNo is required"},render:({field:o,fieldState:r})=>e.jsx(m,{...o,label:"EmployeeTFNNo",variant:"outlined",error:!!r.error,helperText:r.error?r.error.message:""})}),e.jsx(t,{name:"EmployeeFullName",control:l.control,rules:{required:"EmployeeFullName is required"},render:({field:o,fieldState:r})=>e.jsx(m,{...o,label:"EmployeeFullName",variant:"outlined",error:!!r.error,helperText:r.error?r.error.message:""})}),e.jsx(t,{name:"EmployeeAddressLine1",control:l.control,rules:{required:"EmployeeAddressLine1 is required"},render:({field:o,fieldState:r})=>e.jsx(m,{...o,label:"EmployeeAddressLine1",variant:"outlined",error:!!r.error,helperText:r.error?r.error.message:""})}),e.jsx(t,{name:"EmployeeAddressLine2",control:l.control,render:({field:o,fieldState:r})=>e.jsx(m,{...o,label:"EmployeeAddressLine2",variant:"outlined",error:!!r.error})}),e.jsx(t,{name:"EmployeeEmail",control:l.control,rules:{required:"EmployeeEmail is required"},render:({field:o,fieldState:r})=>e.jsx(m,{...o,type:"email",label:"EmployeeEmail",variant:"outlined",error:!!r.error,helperText:r.error?r.error.message:""})}),e.jsx(y,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})})]}));b.propTypes={methods:c.object,isOpen:c.bool,handleToggle:c.func,onSubmit:c.func,loading:c.bool};const _=b;function R(){const l=F(),p=q(),{id:s}=p,{employees:a,loading:d,createEmployee:o}=O({id:s}),r=D(),[i,x]=E.useState(!1);console.log(a,"employees");const g=()=>{x(!i)},N=n=>{o({clientId:(s==null?void 0:s.split("_")[1])??s,payload:{...n,ClientID:s}}).then(()=>x(!i)).catch(u=>u)},T=()=>{x(!i)},f=()=>{l(-1)},C=(n,u)=>{n.field==="clientId"&&l(`/client/${s}/employee/${n.row.employeeId}`)},I=a&&a.length>0?a==null?void 0:a.map((n,u)=>({id:`${n.EmployeeID}_${u}`,clientId:n.ClientID,employeeId:n.EmployeeID,abnNo:n.EmployeeABNNo,name:n.EmployeeFullName,email:n.EmployeeEmail??"",shareOptions:n.shareOptions,...n})):[];return E.useEffect(()=>{i||r.reset()},[i]),e.jsxs(G,{children:[e.jsx(j,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(y,{variant:"contained",color:"inherit",startIcon:e.jsx(h,{icon:"ion:chevron-back-outline"}),onClick:f,children:"Back"})}),e.jsxs(j,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsx(B,{variant:"h4",children:"Employees"}),e.jsx(y,{variant:"contained",color:"inherit",startIcon:e.jsx(h,{icon:"eva:plus-fill"}),onClick:g,children:"New Employees"})]}),e.jsx(L,{sx:{p:5},children:e.jsx(A,{children:e.jsx(M,{checkboxSelection:!1,data:a,columns:$,rows:I,loading:d,handleOnCellClick:C})})}),e.jsx(_,{methods:r,isOpen:i,handleToggle:T,onSubmit:N,loading:d})]})}function S(){return e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsx("title",{children:" Employees "})}),e.jsx(R,{})]})}export{S as default};
